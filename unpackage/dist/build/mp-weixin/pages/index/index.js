"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/counter.js");if(require("../../request/index.js"),!Array){(e.resolveComponent("van-notice-bar")+e.resolveComponent("van-grid-item")+e.resolveComponent("van-grid")+e.resolveComponent("van-button")+e.resolveComponent("van-dropdown-item")+e.resolveComponent("van-dropdown-menu")+e.resolveComponent("van-card")+e.resolveComponent("van-loading"))()}const o={__name:"index",setup(o){const s=t.Store(),i=e.ref([{business:"代取快递",type:"icon-rentou"},{business:"代拿外卖",type:"icon-tubiaozhizuomoban2-01"},{business:"代写笔记",type:"icon-biji"},{business:"超市代购",type:"icon-fuwuchaoshi"},{business:"校园跑腿",type:"icon-pao"},{business:"校园代跑",type:"icon-tiyu-qipao"},{business:"帮搬东西",type:"icon-iconfont_loadingbay"},{business:"代替上课",type:"icon-tongxueshangke-"},{business:"代替查寝",type:"icon-Dorm"},{business:"替试/补考",type:"icon-a-kaoshi1"}]),a=e.ref(!0),r=e.ref(!0),n=e.computed((()=>s.LBList)),c=e.ref(0),l=[{text:"默认排序",value:0},{text:"好评排序",value:1},{text:"销量排序",value:2}];e.ref(null);const d=()=>{e.wx$1.createSelectorQuery().select("#anchor").boundingClientRect((t=>{e.wx$1.pageScrollTo({scrollTop:t.top,duration:300})})).exec()},u=e.computed((()=>s.schoolStoreList)),p=["营业中","打样","暂停"];e.onMounted((async()=>{await s.getLBData({url:"bannerImage/list/page",method:"POST",data:{createTime:"",current:0,id:0,imageName:"",imageUrl:"",isDelete:0,pageSize:5,schoolId:1,sortField:"",sortOrder:"",state:0,user_id:0}}),await s.getSchoolStoreData({address:"",category1Id:0,current:g,delivery_price:0,delivery_time:0,id:0,isDelete:0,pageSize:5,score:0,sortField:"",sortOrder:"",start_price:0,state:0,storeName:""}),console.log(s.schoolStoreList)})),e.onLoad((async()=>{await e.index.request({url:"http://39.99.231.129:8121/api/user/login",method:"POST",withCredentials:!0,data:{userAccount:"zlc16330",userPassword:"zhang123."},success:t=>{console.log(t),s.userId=t.data.data.id;const o=t.header["Set-Cookie"];e.index.setStorageSync("sessionCookie",o),console.log("Cookie 设置成功:",o)},fail:e=>{console.log("登录调用失败")}});const t=e.index.getStorageSync("sessionCookie");await e.index.request({url:"http://39.99.231.129:8121/api/gridItemInfo/add",method:"POST",withCredentials:!0,header:{"content-type":"application/json",Cookie:t},data:{descStr:"itemtest",icon:"test",state:0,url:"/test-21"},success:e=>{console.log(e)},fail:e=>{console.log("调用失败")}})}));let m=e.ref(!1),g=1;e.onReachBottom((async()=>{m.value=!0,await setTimeout((()=>{m.value=!1,g++,s.getSchoolStoreData({address:"",category1Id:0,current:g,delivery_price:0,delivery_time:0,id:0,isDelete:0,pageSize:5,score:0,sortField:"",sortOrder:"",start_price:0,state:0,storeName:""})}),1e3)}));const y=()=>{e.index.redirectTo({url:"/subpages/takeaway/takeaway"})};return(t,o)=>({a:e.f(e.unref(n),((e,t,o)=>({a:e.imageUrl,b:e.id}))),b:a.value,c:r.value,d:3e3,e:500,f:e.p({leftIcon:"volume-o",text:"在代码阅读过程中人们说脏话的频率是衡量代码质量的唯一标准。"}),g:e.o(d),h:e.p({useSlot:!0,text:"校园外卖"}),i:e.f(i.value,((t,o,s)=>({a:e.n(`${t.type}`),b:e.t(t.business),c:e.o((t=>(t=>{t++,e.index.navigateTo({url:`/subpages/publish/publish?index=${t}`})})(o)),o),d:o,e:"15c45644-3-"+s+",15c45644-1",f:e.p({useSlot:!0,text:t.business})}))),j:e.p({useSlot:!0,text:"代扫卫生"}),k:e.p({square:!0,iconSize:"20px"}),l:e.p({round:!0,size:"normal",type:"primary"}),m:e.o(y),n:e.p({round:!0,type:"primary"}),o:e.p({value:c.value,options:l}),p:e.f(e.unref(u),((t,o,s)=>({a:e.t(p[t.state]),b:e.t(t.score),c:e.t(t.start_price),d:e.t(t.delivery_price),e:e.t(t.delivery_time),f:"15c45644-9-"+s,g:e.p({desc:t.address,title:t.storeName,thumb:t.imageUrl}),h:o,i:e.o((o=>(t=>{let o={category1Id:t.category1Id,imageUrl:t.imageUrl,score:t.score,storeName:t.storeName,delivery_time:t.delivery_time,id:t.id},s=encodeURIComponent(JSON.stringify(o));e.index.navigateTo({url:`/subpages/detail/detail?params=${s}`,animationType:"pop-in",animationDuration:200})})(t)),o)}))),q:e.p({color:"#1989fa",type:"spinner"}),r:e.unref(m)})}},s=e._export_sfc(o,[["__scopeId","data-v-15c45644"]]);wx.createPage(s);
